{% extends '@App/adminlte/layout.html.twig' %}

{% block main_title %}Inicio{% endblock main_title %}

{% block main_breadcrumb %}
    <li><a href="{{ path('homepage') }}"><i class="fa fa-home"></i> Inicio</a></li>
{% endblock main_breadcrumb %}

{% block main_container %}
    <div class="row">
        {% if is_granted('ROLE_ADMIN') %}
            <div class="col-md-12">
                <div class="row">
                    <div class="col-lg-3 col-xs-6">
                        <div class="small-box bg-aqua">
                            <div class="inner">
                                <h3>150</h3>

                                <p>New Orders</p>
                            </div>
                            <div class="icon">
                                <i class="ion ion-bag"></i>
                            </div>
                            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-3 col-xs-6">
                        <!-- small box -->
                        <div class="small-box bg-green">
                            <div class="inner">
                                <h3>53<sup style="font-size: 20px">%</sup></h3>

                                <p>Bounce Rate</p>
                            </div>
                            <div class="icon">
                                <i class="ion ion-stats-bars"></i>
                            </div>
                            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-3 col-xs-6">
                        <!-- small box -->
                        <div class="small-box bg-yellow">
                            <div class="inner">
                                <h3>44</h3>

                                <p>User Registrations</p>
                            </div>
                            <div class="icon">
                                <i class="ion ion-person-add"></i>
                            </div>
                            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-3 col-xs-6">
                        <!-- small box -->
                        <div class="small-box bg-red">
                            <div class="inner">
                                <h3>65</h3>

                                <p>Unique Visitors</p>
                            </div>
                            <div class="icon">
                                <i class="ion ion-pie-graph"></i>
                            </div>
                            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-4">
                        <div class="box">
                            <div class="box-header with-border">
                                <h3 class="box-title">Productos Actualizados Recientemente</h3>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-box-tool" data-widget="remove">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="box-body">
                                <ul class="products-list product-list-in-box">
                                    {% for product in recentlyUpdatedProducts %}
                                        <li class="item">
                                            <div class="product-img">
                                                <img src="{{ asset(product.img) }}" alt="Imagen del Producto">
                                            </div>
                                            <div class="product-info">
                                                <a href="#" class="product-title modal-trigger" data-method="GET"
                                                   data-action="{{ path('mjmc_crud', { entityName: 'Product', id: product.id }) }}">
                                                    {{ product.code }}
                                                    <span class="label label-success pull-right">${{ product.price }}</span>
                                                </a>
                                                <span class="product-description">{{ product.description }}</span>
                                            </div>
                                        </li>
                                    {% else %}
                                        <li>Ningún elemento encontrado.</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="box-footer text-center">
                                <a href="{{ path('products') }}">Ver Productos</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="box">
                            <div class="box-header with-border">
                                <h3 class="box-title">Productos Más Visitados</h3>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-box-tool" data-widget="remove">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="box-body">
                                <ul class="products-list product-list-in-box">
                                    {% for product in mostVisitedProducts %}
                                        <li class="item">
                                            <div class="product-img">
                                                <img src="{{ asset(product.img) }}" alt="Imagen del Producto">
                                            </div>
                                            <div class="product-info">
                                                <a href="#" class="product-title modal-trigger" data-method="GET"
                                                   data-action="{{ path('mjmc_crud', { entityName: 'Product', id: product.id }) }}">
                                                    {{ product.code }}
                                                    <span class="label label-success pull-right">${{ product.price }}</span>
                                                </a>
                                                <span class="product-description">{{ product.description }}</span>
                                            </div>
                                        </li>
                                    {% else %}
                                        <li>Ningún elemento encontrado.</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="box-footer text-center">
                                <a href="{{ path('products') }}">Ver Productos</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="box">
                            <div class="box-header with-border">
                                <h3 class="box-title">Productos Más Reservados</h3>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-box-tool" data-widget="remove">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="box-body">
                                <ul class="products-list product-list-in-box">
                                    {% for product in mostReservedProducts %}
                                        <li class="item">
                                            <div class="product-img">
                                                <img src="{{ asset(product.img) }}" alt="Imagen del Producto">
                                            </div>
                                            <div class="product-info">
                                                <a href="#" class="product-title modal-trigger" data-method="GET"
                                                   data-action="{{ path('mjmc_crud', { entityName: 'Product', id: product.id }) }}">
                                                    {{ product.code }}
                                                    <span class="label label-success pull-right">${{ product.price }}</span>
                                                </a>
                                                <span class="product-description">{{ product.description }}</span>
                                            </div>
                                        </li>
                                    {% else %}
                                        <li>Ningún elemento encontrado.</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="box-footer text-center">
                                <a href="{{ path('products') }}">Ver Productos</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock main_container %}
